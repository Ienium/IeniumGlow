if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Debug)
endif()

# Ensure debug symbols are generated
if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    if(MSVC)
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /Zi /Od")
        set(CMAKE_SHARED_LINKER_FLAGS_DEBUG "${CMAKE_SHARED_LINKER_FLAGS_DEBUG} /DEBUG")
        set(CMAKE_EXE_LINKER_FLAGS_DEBUG "${CMAKE_EXE_LINKER_FLAGS_DEBUG} /DEBUG")
    else()
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g -O0")
    endif()
endif()

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
#set(CMAKE_TOOLCHAIN_FILE "F:/vcpkg/scripts/buildsystems/vcpkg.cmake")

cmake_minimum_required (VERSION 3.25)
project(IeniumGLow
    VERSION 0.1.0
    DESCRIPTION "2D Sprite Renderer"
    LANGUAGES CXX
)

# C++ Standard
set(CMAKE_CXX_STANDARD 23)
set(CMAKE_CXX_STANDARD_REQUIRED On)

# Options
option(IENIUM_GLOW_BUILD_EXAMPLES "Build examples" ON)
option(IENIUM_GLOW_BUILD_TEST "Build tests" ON)

find_package(GLEW REQUIRED)
find_package(glfw3 REQUIRED)
add_subdirectory(src)

if(IENIUM_GLOW_BUILD_EXAMPLES)
    add_subdirectory(examples)
endif()

if(IENIUM_GLOW_BUILD_TEST AND BUILD_TESTING)
    enable_testing()
    add_subdirectory(tests)
endif()
