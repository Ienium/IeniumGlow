if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE Debug)
endif()

# Ensure debug symbols are generated
if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    if(WIN32)
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g -O0")
    else()
        set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g -O0")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fsanitize=address,undefined -g -O0")
    endif()
endif()

set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

cmake_minimum_required (VERSION 3.12)
project(IeniumGLow
    VERSION 0.2.0
    DESCRIPTION "2D Sprite Renderer"
    LANGUAGES CXX
)

# C++ Standard
set(CMAKE_CXX_STANDARD 23)
set(CMAKE_CXX_STANDARD_REQUIRED On)

# Options
option(IENIUM_GLOW_BUILD_EXAMPLES "Build examples" ON)
option(IENIUM_GLOW_BUILD_TEST "Build tests" OFF)

find_package(GLEW REQUIRED)
find_package(glfw3 REQUIRED)

if (NOT WIN32)
    find_package(OpenGL REQUIRED)
endif()

add_subdirectory(src)

if(IENIUM_GLOW_BUILD_EXAMPLES)
    add_subdirectory(examples)
endif()

if(IENIUM_GLOW_BUILD_TEST AND BUILD_TESTING)
    enable_testing()
    add_subdirectory(tests)
endif()